<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>Linux学习 笔记#09 正规表示法与文件格式化处理 - 一切都会好起来的哟</title>
  <meta charset="UTF-8">
  <meta name="referrer" content="no-referrer-when-downgrade">
  <meta name="description" content="Hosizuki">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="/pictures/icon.jpg" type="image/png" />
  <meta name="description" content="像乱码一样的正则表达式！">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux学习 笔记#09 正规表示法与文件格式化处理">
<meta property="og:url" content="https://hosizuki.github.io/2021/07/08/linuxA0708/index.html">
<meta property="og:site_name" content="一切都会好起来的哟">
<meta property="og:description" content="像乱码一样的正则表达式！">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-07-08T07:20:36.000Z">
<meta property="article:modified_time" content="2021-07-13T07:30:52.976Z">
<meta property="article:author" content="Hosizuki">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
  
<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/justifiedGallery/justifiedGallery.min.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">
<link rel="stylesheet" href="/lib/atom-one-dark.css">

  <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1692526127217">
  
  <link rel="stylesheet" href="/css/style.css?v=1692526127217">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
  <script src="/live2d-widget/autoload.js"></script>
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(/pictures/dream/yokina.PNG)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Hosizuki" class="mdui-btn mdui-btn-icon"><img src="/pictures/me.jpg" alt="Hosizuki"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Hosizuki">
            <img src="/pictures/me.jpg" alt="Hosizuki" alt="Hosizuki">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>忆</span>119</div>
        <div><span>签</span>17</div>
        <div><span>属</span>5</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives.html" title="归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about-welcome.html" title="关于">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/files/OnlyMyCube/OnlyMyCube.html" title="游戏">
            <i class="mdui-list-item-icon nexmoefont icon-coffee"></i>
            <div class="mdui-list-item-content">
                游戏
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">

    <!--
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
    -->

    <!-- 我的搜索 -->
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form">
            <label><input id="local-search-input" name="q" type="text" results="0" placeholder="搜全站！" class="st-search-input st-default-search-input form-control"/></label>
        </form>
        <div id="local-search-result" ></div>
    </div>
    

</div>

  
  
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/Fortran/" style="font-size: 10px;">Fortran</a> <a href="/tags/Linux/" style="font-size: 16.67px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/Mirror/" style="font-size: 20px;">Mirror</a> <a href="/tags/Pokemon/" style="font-size: 10px;">Pokemon</a> <a href="/tags/Sim/" style="font-size: 10px;">Sim</a> <a href="/tags/%E4%BF%9D%E7%A0%94/" style="font-size: 15.56px;">保研</a> <a href="/tags/%E5%9C%B0%E7%90%83%E7%A7%91%E5%AD%A6/" style="font-size: 17.78px;">地球科学</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 12.22px;">建站</a> <a href="/tags/%E6%97%A5%E8%AF%AD/" style="font-size: 10px;">日语</a> <a href="/tags/%E6%A8%A1%E5%BC%8F/" style="font-size: 14.44px;">模式</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 11.11px;">游戏</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 18.89px;">生活</a> <a href="/tags/%E8%AF%BE%E7%A8%8B%E8%B5%84%E6%96%99/" style="font-size: 13.33px;">课程资料</a> <a href="/tags/%E8%B5%9B%E8%BD%A6/" style="font-size: 14.44px;">赛车</a> <a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 10px;">转载</a> <a href="/tags/%E9%9F%B3%E6%B8%B8/" style="font-size: 12.22px;">音游</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">47</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">36</span></li></ul>
    </div>
  </div>



  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/学习/">学习</a>
          <span class="category-list-count">37</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/小记/">小记</a>
          <span class="category-list-count">58</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/游戏/">游戏</a>
          <span class="category-list-count">12</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/经验/">经验</a>
          <span class="category-list-count">7</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/资料/">资料</a>
          <span class="category-list-count">4</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/316021638" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/Hosizuki" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="mailto:sinkihosizuki@gmail.com" target="_blank" mdui-tooltip="{content: '邮箱'}" style="color: rgb(106,90,205);background-color: rgba(230,230,250);">
            <i class="nexmoefont icon-mail-fill"></i>
        </a><a class="mdui-ripple" href="https://twitter.com/Hosizuki_THU" target="_blank" mdui-tooltip="{content: 'twitter'}" style="color: rgb(59,200,244);background-color: rgb(59,200,244, .15);">
            <i class="nexmoefont icon-twitter"></i>
        </a>
    </div>
</div>
  
</aside>

<center>
    <font color="#6495ED"> 营业额达成！ [<span id="busuanzi_value_site_uv"></span>/1000] </font>
  <br> </br>
  </center>
    <div class="nexmoe-copyright">
        &copy; 2023 Hosizuki
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 75.11244377811094%;"> 
          <img data-src="/pictures/dream/tsugumi-barista.png" data-sizes="auto" alt="Linux学习 笔记#09 正规表示法与文件格式化处理" class="lazyload">
          <h1>Linux学习 笔记#09 正规表示法与文件格式化处理</h1>
      </div>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2021年07月08日</a>
    <a><i class="nexmoefont icon-areachart"></i>2.8k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 12 分钟</a>
    
</div>

  <div class="nexmoe-post-right">
    
      <div class="nexmoe-fixed">
        <div class="nexmoe-valign">
            <div class="nexmoe-toc">
                
                
                  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ch11-%E6%AD%A3%E8%A7%84%E8%A1%A8%E7%A4%BA%E6%B3%95%E4%B8%8E%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%A4%84%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Ch11 正规表示法与文件格式化处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%AD%A3%E8%A7%84%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">基础正规表示法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E4%B8%AD%E6%8B%AC%E5%8F%B7-%E6%9D%A5%E6%90%9C%E5%AF%BB%E9%9B%86%E5%90%88%E5%AD%97%E7%AC%A6"><span class="toc-number">1.1.1.</span> <span class="toc-text">利用中括号 [] 来搜寻集合字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E9%A6%96%E4%B8%8E%E8%A1%8C%E5%B0%BE%E5%AD%97%E7%AC%A6"><span class="toc-number">1.1.2.</span> <span class="toc-text">行首与行尾字符 ^ $</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BB%E6%84%8F%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6-%E4%B8%8E%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6"><span class="toc-number">1.1.3.</span> <span class="toc-text">任意一个字符 . 与重复字符 *</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%99%90%E5%AE%9A%E8%BF%9E%E7%BB%AD-RE-%E5%AD%97%E7%AC%A6%E8%8C%83%E5%9B%B4"><span class="toc-number">1.1.4.</span> <span class="toc-text">限定连续 RE 字符范围 {}</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sed-%E5%B7%A5%E5%85%B7"><span class="toc-number">1.2.</span> <span class="toc-text">sed 工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%B6%E4%BC%B8%E6%AD%A3%E8%A7%84%E8%A1%A8%E7%A4%BA%E6%B3%95"><span class="toc-number">1.3.</span> <span class="toc-text">延伸正规表示法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%B8%8E%E7%9B%B8%E5%85%B3%E5%A4%84%E7%90%86"><span class="toc-number">1.4.</span> <span class="toc-text">文件的格式化与相关处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%89%93%E5%8D%B0%EF%BC%9A-printf"><span class="toc-number">1.4.1.</span> <span class="toc-text">格式化打印： printf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#awk%EF%BC%9A%E5%A5%BD%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">1.4.2.</span> <span class="toc-text">awk：好用的数据处理工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%AF%94%E5%AF%B9%E5%B7%A5%E5%85%B7"><span class="toc-number">1.4.3.</span> <span class="toc-text">文件比对工具</span></a></li></ol></li></ol></li></ol>
                
            </div>
        </div>
      </div>
    
  </div>

  <article>
    <p>像乱码一样的正则表达式！ <span id="more"></span></p>
<h2 id="Ch11-正规表示法与文件格式化处理"><a href="#Ch11-正规表示法与文件格式化处理" class="headerlink" title="Ch11 正规表示法与文件格式化处理"></a>Ch11 正规表示法与文件格式化处理</h2><h3 id="基础正规表示法"><a href="#基础正规表示法" class="headerlink" title="基础正规表示法"></a>基础正规表示法</h3><p><em>使用正规表示法时，需要特别留意当时环境的语系，练习使用 LANG=C</em></p>
<p>为了避免编码所造成的英文与数字的撷取问题，有些特殊的符号得要了解一下, 粗体比较重要:</p>
<table>
<thead>
<tr>
<th align="center">特殊字段</th>
<th align="left">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>[:alnum:]</strong></td>
<td align="left"><strong>代表英文大小写字符及数字，亦即 0-9, A-Z, a-z</strong></td>
</tr>
<tr>
<td align="center"><strong>[:alpha:]</strong></td>
<td align="left"><strong>代表任何英文大小写字符，亦即 A-Z, a-z</strong></td>
</tr>
<tr>
<td align="center">[:blank:]</td>
<td align="left">代表空格键与 [Tab] 按键两者</td>
</tr>
<tr>
<td align="center">[:cntrl:]</td>
<td align="left">代表键盘上面的控制按键，亦即包括 CR, LF, Tab, Del.. 等等</td>
</tr>
<tr>
<td align="center"><strong>[:digit:]</strong></td>
<td align="left"><strong>代表数字而已，亦即 0-9</strong></td>
</tr>
<tr>
<td align="center">[:graph:]</td>
<td align="left">除了空格符 (空格键与 [Tab] 按键) 外的其他所有按键</td>
</tr>
<tr>
<td align="center"><strong>[:lower:]</strong></td>
<td align="left"><strong>代表小写字符，亦即 a-z</strong></td>
</tr>
<tr>
<td align="center">[:print:]</td>
<td align="left">代表任何可以被打印出来的字符</td>
</tr>
<tr>
<td align="center">[:punct:]</td>
<td align="left">代表标点符号 (punctuation symbol)，亦即：” ‘ ? ! ; : # $…</td>
</tr>
<tr>
<td align="center"><strong>[:upper:]</strong></td>
<td align="left"><strong>代表大写字符，亦即 A-Z</strong></td>
</tr>
<tr>
<td align="center">[:space:]</td>
<td align="left">任何会产生空白的字符，包括空格键, [Tab], CR 等等</td>
</tr>
<tr>
<td align="center">[:xdigit:]</td>
<td align="left">代表 16 进位的数字类型，因此包括： 0-9, A-F, a-f 的数字与字符</td>
</tr>
</tbody></table>
<p><code>grep [-vin] [-A] [-B] [--color=auto] &#39;搜寻字符串&#39; filename </code><br>选项与参数：<br>-A ：后面可加数字，为 after 的意思，除了列出该行外，后续的 n 行也列出来；<br>-B ：后面可加数字，为 befer 的意思，除了列出该行外，前面的 n 行也列出来；<br>-n : 加行号<br>-v : 反向选择<br>-i : 忽略大小写<br>–color=auto 可将正确的那个撷取数据列出颜色</p>
<p>grep 在数据中查寻一个字符串时，是以 “整行” 为单位来进行数据的撷取的.</p>
<h4 id="利用中括号-来搜寻集合字符"><a href="#利用中括号-来搜寻集合字符" class="headerlink" title="利用中括号 [] 来搜寻集合字符"></a>利用中括号 [] 来搜寻集合字符</h4><ol>
<li>[] 里面不论有几个字符，他都仅代表某『一个』字符, 如 ‘t[ae]st’ 可以匹配到 tast 和 test</li>
<li>集合字符里的 ^ 表示反向选择, 如 ‘[^g]oo’ 就排除了 goo</li>
<li>对于连续字符, 如 [a-z] [A-Z] [0-9] 分别代表小写字母, 大写字母, 数字. 同样[^a-z]表示排除小写字母</li>
<li><del><em>A to Z！A to Z！天下を，A to Z！A to Z！取ります!</em></del></li>
<li>[^[:lower:]] 等价于 [^a-z]</li>
</ol>
<h4 id="行首与行尾字符"><a href="#行首与行尾字符" class="headerlink" title="行首与行尾字符 ^ $"></a>行首与行尾字符 ^ $</h4><ol>
<li>‘^the’ 表示只匹配行首为the的行. ‘^[^a-zA-Z]’ 则表示只匹配行首不是字母的行.</li>
<li>行尾的话就可以 ‘\.$’. </li>
<li>但要注意 win 下会有断行符 ^M$ </li>
<li>空行的话就是 ‘^$’</li>
</ol>
<h4 id="任意一个字符-与重复字符"><a href="#任意一个字符-与重复字符" class="headerlink" title="任意一个字符 . 与重复字符 *"></a>任意一个字符 . 与重复字符 *</h4><ol>
<li>. 代表『一定有一个任意字符』</li>
<li>* 代表『重复前一个字符， 0 到无穷多次』的意思，为组合形态<br>因此 『o*』代表的是：『拥有空字符或一个 o 以上的字符』, ‘o*‘ 就是有没有字符都可以的意思<br>‘goo*g’ 就是 gog, goog, gooog…. 等等</li>
<li>.* 就代表零个或多个任意字符</li>
</ol>
<h4 id="限定连续-RE-字符范围"><a href="#限定连续-RE-字符范围" class="headerlink" title="限定连续 RE 字符范围 {}"></a>限定连续 RE 字符范围 {}</h4><p>因为 { 与 } 的符号在 shell 是有特殊意义的，因此， 我们必须要使用跳脱字符 \ 来让他失去特殊意义才行</p>
<ol>
<li>‘o{2,}’ 代表2个及以上 o</li>
<li>‘o{2,5}’ 代表2到5个 o</li>
<li>‘o{2}’ 代表2个 o</li>
</ol>
<h3 id="sed-工具"><a href="#sed-工具" class="headerlink" title="sed 工具"></a>sed 工具</h3><p>sed 本身也是一个管线命令，可以分析 standard input 的啦！ 而且 sed 还可以将数据进行取代、删除、新增、撷取特定行等等的功能呢！</p>
<p><code>sed [-nefr] [动作] </code><br>-n  ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到屏幕上。 但如果加上 -n 参数后，则只有经过 sed 特殊处理的那一行(或者动作)才会被列出来。<br>-e  ：直接在指令行模式上进行 sed 的动作编辑；<br>-f  ：直接将 sed 的动作写在一个文件内， -f filename 则可以执行 filename 内的 sed 动作；<br>-r  ：sed 的动作支持的是延伸型正规表示法的语法。(预设是基础正规表示法语法)<br>-i  ：直接修改读取的文件内容，而不是由屏幕输出。 </p>
<p>动作说明：  [n1[,n2]]function<br>n1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』 </p>
<p>function 有底下这些咚咚：<br>a   ：新增， a 的后面可以接字符串，而这些字符串会在新的一行出现(目前的下一行)～<br>c   ：取代， c 的后面可以接字符串，这些字符串可以取代 n1,n2 之间的行！<br>d   ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；<br>i   ：插入， i 的后面可以接字符串，而这些字符串会在新的一行出现(目前的上一行)；<br>p   ：打印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运作～<br>s   ：取代，可以直接进行取代的工作！通常这个 s 的动作可以搭配正规表示法！ 例如 1,20s/old/new/g 就是啦！</p>
<p>举例:</p>
<ol>
<li><code>nl /etc/passwd | sed &#39;2,5d&#39; </code> 删除2到5行. 动作要用单引号括住</li>
<li><code>nl /etc/passwd | sed &#39;2,$d&#39; </code> 删除2到最后一行. </li>
<li><code>nl /etc/passwd | sed &#39;2a drink tea&#39;</code> 在第二行后面加一行 drink tea. 两行以上的话要用 \</li>
<li><code>nl /etc/passwd | sed -n &#39;5,7p&#39;</code> 取出5到7行.</li>
<li><code>/sbin/ifconfig eth0 | grep &#39;inet &#39; | sed &#39;s/^.*inet //g&#39; | sed &#39;s/ *netmask.*$//g&#39;</code> 删除ip的首尾</li>
<li><code>cat /etc/man_db.conf | grep &#39;MAN&#39;| sed &#39;s/#.*$//g&#39; | sed &#39;/^$/d&#39;</code> 删除含有注释的和空白行</li>
</ol>
<p>sed 后面如果要接超过两个以上的动作时，每个动作前面得加 -e 才行</p>
<h3 id="延伸正规表示法"><a href="#延伸正规表示法" class="headerlink" title="延伸正规表示法"></a>延伸正规表示法</h3><p><code>grep -E</code> 或 <code>egrep</code> 来支持延伸正规表示法!</p>
<table>
<thead>
<tr>
<th align="center">RE 字符</th>
<th align="left">意义与范例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">+</td>
<td align="left">意义：重复『一个或一个以上』的前一个 RE 字符 <br>范例：搜寻 (god) (good) (goood)… 等等的字符串。  <br><code>egrep -n &#39;go+d&#39; regular_express.txt </code></td>
</tr>
<tr>
<td align="center">?</td>
<td align="left">意义：『零个或一个』的前一个 RE 字符 <br>范例：搜寻 (gd) (god) 这两个字符串。 <br><code>egrep -n &#39;go?d&#39; regular_express.txt </code></td>
</tr>
<tr>
<td align="center">丨</td>
<td align="left">意义：用或( or )的方式找出数个字符串 <br>范例：搜寻 gd 或 good 这两个字符串<br><code>egrep -n &#39;gd丨good&#39; regular_express.txt</code> <br>那如果还想要找出 dog 呢？ <br><code>egrep -n &#39;gd丨good丨dog&#39; regular_express.txt</code></td>
</tr>
<tr>
<td align="center">()</td>
<td align="left">意义：找出『群组』字符串 <br>范例：搜寻 (glad) 或 (good) 这两个字符串<br><code>egrep -n &#39;g(la丨oo)d&#39; regular_express.txt</code></td>
</tr>
<tr>
<td align="center">()+</td>
<td align="left"><br>意义：多个重复群组的判别 <br>范例：将『AxyzxyzxyzxyzC』用 echo 叫出，然后再使用如下的方法搜寻一下！ <br><code>echo &#39;AxyzxyzxyzxyzC&#39; 丨 egrep &#39;A(xyz)+C&#39; </code><br>上面的例子意思是说，我要找开头是 A 结尾是 C ，中间有一个以上的 “xyz” 字符串～</td>
</tr>
</tbody></table>
<h3 id="文件的格式化与相关处理"><a href="#文件的格式化与相关处理" class="headerlink" title="文件的格式化与相关处理"></a>文件的格式化与相关处理</h3><h4 id="格式化打印：-printf"><a href="#格式化打印：-printf" class="headerlink" title="格式化打印： printf"></a>格式化打印： printf</h4><p><code>printf &#39;打印格式&#39; &#39; 实际内容</code><br>关于格式方面的几个特殊样式：<br>\a    警告声音输出<br>\b    退格键(backspace)<br>\f    清除屏幕 (form feed)<br>\n    输出新的一行<br>\r    亦即 Enter 按键<br>\t    水平的 [tab] 按键<br>\v    垂直的 [tab] 按键<br>\xNN  NN 为两位数的数字，可以转换数字成为字符。<br>关于 C 程序语言内，常见的变数格式<br>%ns   那个 n 是数字， s 代表 string ，亦即多少个字符；<br>%ni   那个 n 是数字， i 代表 integer ，亦即多少整数字数；<br>%N.nf 那个 n 与 N 都是数字， f 代表 floating (浮点)，如果有小数字数，<br>      假设我共要十个位数，但小数点有两位，即为 %10.2f 啰！</p>
<p>用例:<br><code>printf &#39;%s\t %s\t %s\t %st %s\t %st %s\t t \n&#39; $(cat printf.txt)</code></p>
<pre><code>Name     Chinese         English         Math    Average 
DmTsai   80      60      92      77.33 
VBird    75      55      80      70.00 
Ken      60      90      70      73.33</code></pre>
<p><code>printf &#39;%10s %5i %5i %5i %8.2f \n&#39; $(cat printf.txt | grep -v Name) </code></p>
<pre><code>DmTsai    80    60    92    77.33 
 VBird    75    55    80    70.00 
   Ken    60    90    70    73.33</code></pre>
<p><code>printf &#39;\x45\n&#39;</code></p>
<pre><code>E</code></pre>
<h4 id="awk：好用的数据处理工具"><a href="#awk：好用的数据处理工具" class="headerlink" title="awk：好用的数据处理工具"></a>awk：好用的数据处理工具</h4><p><code>awk &#39;条件类型1&#123;动作1&#125; 条件类型2&#123;动作2&#125; ...&#39; filename</code><br>awk 主要是处理『每一行的字段内的数据』，而默认的『字段的分隔符为 “空格键” 或 “[tab]键” 』</p>
<p>例:<code>last -n 5 | awk &#39;&#123;print $1 &quot;\t&quot; $3&#125;&#39;</code> 调出第一列和第三列<br>awk 后续的所有动作是以单引号『 ‘ 』括住的, 非变量的文字部分，包含上一小节 printf 提到的格式中，都需要使用双引号来定义出来喔！</p>
<p>awk的内建变量:</p>
<table>
<thead>
<tr>
<th align="center">变量名称</th>
<th align="left">代表意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">NF</td>
<td align="left">每一行 ($0) 拥有的字段总数</td>
</tr>
<tr>
<td align="center">NR</td>
<td align="left">目前 awk 所处理的是『第几行』数据</td>
</tr>
<tr>
<td align="center">FS</td>
<td align="left">目前的分隔字符，默认是空格键</td>
</tr>
</tbody></table>
<p>例:<code>last -n 5| awk &#39;&#123;print $1 &quot;\t lines: &quot; NR &quot;\t columns: &quot; NF&#125;&#39;</code></p>
<p>awk的条件支持C式的逻辑运算</p>
<p>例:<code>cat /etc/passwd | awk &#39;&#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\t &quot; $3&#125;&#39;</code> 以:为分隔符, 输出第三栏小于10的</p>
<p>这个定义FS在第二行才生效, 因此要用BEGIN<br><code>cat /etc/passwd | awk &#39;BEGIN &#123;FS=&quot;:&quot;&#125; $3 &lt; 10 &#123;print $1 &quot;\t &quot; $3&#125;&#39;</code></p>
<p>计算功能:</p>
<pre><code>cat pay.txt | \ 
awk &#39;NR==1&#123;printf &quot;%10s %10s %10s %10s %10s\n&quot;,$1,$2,$3,$4,&quot;Total&quot; &#125; 
NR&gt;=2&#123;total = $2 + $3 + $4 
printf &quot;%10s %10d %10d %10d %10.2f\n&quot;, $1, $2, $3, $4, total&#125;&#39; 

  Name        1st        2nd        3th      Total 
 VBird      23000      24000      25000   72000.00 
DMTsai      21000      20000      23000   64000.00 
 Bird2      43000      42000      41000  126000.00</code></pre>
<p>说明:</p>
<ol>
<li>awk 的指令间隔：所有 awk 的动作，亦即在 {} 内的动作，如果有需要多个指令辅助时，可利用分号『;』间隔， 或者直接以 [Enter] 按键来隔开每个指令. </li>
<li>格式化输出时，在 printf 的格式设定当中，务必加上 \n ，才能进行分行！ </li>
<li>与 bash shell 的变量不同，在 awk 当中，变量可以直接使用，不需加上 $ 符号。</li>
</ol>
<h4 id="文件比对工具"><a href="#文件比对工具" class="headerlink" title="文件比对工具"></a>文件比对工具</h4><p>比对两个文件之间的差异的，并且是以行为单位来比对, 一般是用在 ASCII 纯文本档的比对上, 同一的文件(或软件)的新旧版本差异</p>
<p><code>diff [-bBi] from-file to-file</code><br>from-file ：一个档名，作为原始比对文件的档名；<br>to-file   ：一个档名，作为目的比对文件的档名；<br>注意，from-file 或 to-file 可以 - 取代，那个 - 代表『Standard input』之意。 </p>
<p>-b  ：忽略一行当中，仅有多个空白的差异(例如 “about me” 与 “about     me” 视为相同<br>-B  ：忽略空白行的差异。<br>-i  ：忽略大小写的不同。</p>
<p>打印结果中 &lt; 代表左边from内容, &gt; 代表右边to内容.</p>
<p><code>cmp [-l] file1 file2</code> 利用『字节』单位去比对两个文件<br>-l  ：将所有的不同点的字节处都列出来。因为 cmp 预设仅会输出第一个发现的不同点。</p>
<p><code>patch</code> 用<code>diff -Naur</code>的结果更新或还原文件.</p>
<p><code>pr</code>命令可以用来打印文本文档.</p>
<hr>
<p>下一篇：<a href="/2021/07/13/linuxA0713/">Shell Scripts</a><br>上一篇：<a href="/2021/07/05/linuxA0705/">认识与学习 BASH</a></p>

  </article>

  
    
  <div class="nexmoe-post-copyright">
    <strong>本文作者：</strong>Hosizuki<br>
    <strong>本文链接：</strong><a href="https://hosizuki.github.io/2021/07/08/linuxA0708/" title="https:&#x2F;&#x2F;hosizuki.github.io&#x2F;2021&#x2F;07&#x2F;08&#x2F;linuxA0708&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;hosizuki.github.io&#x2F;2021&#x2F;07&#x2F;08&#x2F;linuxA0708&#x2F;</a><br>
    
      <strong>版权声明：</strong>未经作者授权禁止转载
    
  </div>



<center>
   <font color="#6495ED"> ~本页已被访问<span id="busuanzi_value_page_pv"></span>次了哦~ </font>
  <br> </br>
  </center>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a>
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Linux/" rel="tag">Linux</a>
    
</div>

  <div class="nexmoe-post-footer">
    <section class="nexmoe-comment">
    <!-- Unpkg -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2.5/dist/disqusjs.min.css">
<script src="https://cdn.jsdelivr.net/npm/disqusjs@1.2.5/dist/disqus.min.js"></script>
<div id="disqus_thread"></div>
<script>
var dsqjs = new DisqusJS({
    shortname: 'ningchenhui-github-io',
    siteName: 'hosizuki.github.io',
    identifier: 'https://hosizuki.github.io/2021/07/08/linuxA0708/',
    url: 'https://hosizuki.github.io/2021/07/08/linuxA0708/',
    title: 'Linux学习 笔记#09 正规表示法与文件格式化处理',
    api: 'https://disqus.skk.moe/disqus/',
    apikey: 'e6evOgi4KaQOW9DrrU1gkzYWj6dsm3Pl5ZMMS8kUw46BtSz8Ze355Igzqu11XhhI',
    admin: 'disqus_7i3NGTLGyS',
    adminLabel: ''
});
</script>
</section>
  </div>
</div>
        <div class="nexmoe-post-right">
          <div class="nexmoe-fixed">
            <div class="nexmoe-tool">
              <!-- 回到顶部
              <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
              -->
            </div>
          </div>
        </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script>
	hljs.initHighlightingOnLoad();
</script>



<script src="/lib/mdui_043tiny/mdui.js"></script>
<script src="/lib/jquery.min.js"></script>
<script src="/lib/justifiedGallery/jquery.justifiedGallery.min.js"></script>
<script src="/lib/fancybox/fancybox.umd.js"></script>



<script src="/js/app.js?v=1692526127221"></script>

<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>

<!-- 我的搜索 -->

	<script type="text/javascript">      
	  var search_path = "./public/search.xml";
	  if (search_path.length == 0) {
		  search_path = "search.xml";
	  }
	  var path = "/" + search_path;
	  searchFunc(path, 'local-search-input', 'local-search-result');
	</script>
 
  





<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>

</html>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>


